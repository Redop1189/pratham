/* =================================
* jQuery bgvideo v2.0 (youtube support)
*
* TERMS OF USE - jQuery bgvideo
* 
* Copyright Â© 2016 Spab Rice
* All rights reserved.
================================= */

function buildVideo(e,o,i){("absolute"!==e.css("position")||"relative"!==e.css("position"))&&e.css({position:"relative"}),e.css("background","none"),e.append('<div class="bgvideo-container" style="position:absolute;width:100%;height:100%;top:0;left:0;z-index:-2;overflow:hidden;"></div>');var t=e.find(".bgvideo-container");switch(o.videoposter&&t.css({background:"url("+o.videoposter+") center center","background-size":"cover"}),o.videooverlaycolor&&(t.prepend('<div class="bgvideo-overlay" style="position:absolute;width:100%;height:100%;top:0;left:0;z-index:1;"></div>'),t.find(".bgvideo-overlay").css({background:o.videooverlaycolor,opacity:o.videooverlayopacity})),o.videotype){case"youtube":var a="loop=0";(o.videoloop||"true"===o.videoloop)&&(a="loop=1&playlist="+o.videoyoutubeid);var r="";(o.videomute||"true"==o.videomute)&&(r=" youtube-muted");var d='<iframe id="bgvid-'+i+'" class="video-background'+r+'" style="width:100%;height:100%;" src="https://www.youtube.com/embed/'+o.videoyoutubeid+"?autoplay=1&amp;controls=0&amp;"+a+'&amp;showinfo=0&amp;modestbranding=1&amp;disablekb=1&amp;enablejsapi=1" frameborder="0"></iframe>';break;case"youtube":break;case"html5":var a="";(o.videoloop||"true"==o.videoloop)&&(a=' loop="true"');var r="";(o.videomute||"true"==o.videomute)&&(r=' muted="muted"');var d='<video style="object-fit:cover;width:100%;height:100%;" class="video-background" preload="auto" autoplay="autoplay"'+a+r+">";o.videomp4&&(d+='<source src="'+o.videomp4+'" type="video/mp4" />'),o.videowebm&&(d+='<source src="'+o.videowebm+'" type="video/webm" />'),o.videoogv&&(d+='<source src="'+o.videoogv+'" type="video/ogg" />'),d+="</video>"}jQuery(window).width()>1024&&(o.videomute&&"false"!=o.videomute||e.append('<a href="#" id="mute-video-'+i+'" class="mute-video mute-'+o.videotype+'" style="position:absolute;bottom:15px;left:50%;margin-left: -8px;color:#ffffff;display:block;width: 20px;height: 20px;"><i class="fa fa-volume-up fa-fw"></i></a>'),t.prepend(d),"youtube"===o.videotype&&setRatio(e,o.videoratio))}function setRatio(e,o){var i=e.find(".bgvideo-container").width(),t=e.find(".bgvideo-container").height(),a=i/t,r=16,d=9;"4/3"==o&&(r=4,d=3),"21/9"==o&&(r=21,d=9);var s=r/d;if(a>s){var u=a/s,n=parseInt(u*t,10)+30,v=parseInt(i)+30;e.find("iframe.video-background").css({width:v+"px",height:n+"px",position:"relative",top:"50%","-webkit-transform":"translateY(-50%)","-moz-transform":"translateY(-50%)","-ms-transform":"translateY(-50%)","-o-transform":"translateY(-50%)",transform:"translateY(-50%)"})}else{var u=s/a,v=parseInt(u*i,10)+30,n=parseInt(t)+30;e.find("iframe.video-background").css({height:n+"px",width:v+"px",position:"relative",left:"50%",top:"-15px","-webkit-transform":"translateX(-50%)","-moz-transform":"translateX(-50%)","-ms-transform":"translateX(-50%)","-o-transform":"translateX(-50%)",transform:"translateX(-50%)"})}}function onYouTubePlayerAPIReady(e){player=new YT.Player("bgvid-"+e,{events:{onReady:function(o){jQuery("#bgvid-"+e).hasClass("youtube-muted")&&player.mute(),jQuery("body").on("click","#mute-video-"+e+".mute-video",function(){player.isMuted()?(player.unMute(),jQuery(this).find("i").removeClass("fa-volume-off"),jQuery(this).find("i").addClass("fa-volume-up")):(player.mute(),jQuery(this).find("i").removeClass("fa-volume-up"),jQuery(this).find("i").addClass("fa-volume-off"))})}}})}var tag=document.createElement("script");tag.src="http://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),function(e){e.fn.extend({bgVideo:function(o){return this.each(function(i){var t=jQuery(this),a=e.extend({},r,o,t.data()),r={videotype:!1,videovimeoid:!1,videoyoutubeid:!1,videomp4:!1,videowebm:!1,videoogv:!1,videoratio:"16/9",videoloop:!0,videoposter:!1,videooverlaycolor:!1,videooverlayopacity:.6,videomute:!0};buildVideo(t,a,i),"youtube"===a.videotype&&jQuery(window).width()>1024&&onYouTubePlayerAPIReady(i)})}})}(jQuery),jQuery("body").on("click",".mute-video",function(){if(jQuery(this).hasClass("mute-html5")){var e=jQuery(this).siblings(".bgvideo-container").find("video");0==e.prop("muted")?(e.prop("muted",!0),jQuery(this).find("i").removeClass("fa-volume-up"),jQuery(this).find("i").addClass("fa-volume-off")):(e.prop("muted",!1),jQuery(this).find("i").removeClass("fa-volume-off"),jQuery(this).find("i").addClass("fa-volume-up"))}return!1});var player;